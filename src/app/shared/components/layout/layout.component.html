<div class="flex h-screen bg-white font-sans text-zinc-900">
  <aside
    [class.w-72]="!isCollapsed()"
    [class.w-20]="isCollapsed()"
    class="flex flex-col bg-zinc-50 border-r border-zinc-200 transition-all duration-300 ease-in-out"
  >
    <div class="p-4 flex items-center justify-between">
      <div class="flex items-center gap-3 overflow-hidden" [class.hidden]="isCollapsed()">
        <img src="assets/icons/add-plus.svg" alt="Logo" class="w-8 h-8 object-contain" /><span
          class="font-bold text-lg tracking-tight text-zinc-800"
          >Top Fashion</span
        >
      </div>
      <button
        class="p-2 hover:bg-zinc-200 rounded-full text-zinc-600 transition-colors"
        (click)="toggleSidebar()"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="w-6 h-6"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"
          />
        </svg>
      </button>
    </div>

    <div class="px-3 mb-6">
      <button
        class="w-full flex items-center gap-3 p-4 bg-zinc-200 hover:bg-zinc-300 text-zinc-800 rounded-2xl transition-all font-medium"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="w-6 h-6"
        >
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
        </svg>
        <span [class.hidden]="isCollapsed()" class="whitespace-nowrap">Nueva Cita</span>
      </button>
    </div>

    <nav class="flex-1 px-3 space-y-1">
      @for (item of menuItems; track item.label) { @if (!item.roles || hasRole(item.roles)) {
      <a
        [routerLink]="item.route"
        routerLinkActive="bg-blue-100 text-blue-700"
        class="flex items-center gap-4 p-3 rounded-xl text-zinc-600 hover:bg-zinc-200 transition-all group"
      >
        <div
          class="w-6 h-6 bg-current"
          [style.mask-image]="'url(/assets/icons/' + item.iconPath + '.svg)'"
          [style.-webkit-mask-image]="'url(/assets/icons/' + item.iconPath + '.svg)'"
        ></div>
        <span [class.hidden]="isCollapsed()" class="font-medium">{{ item.label }}</span>
      </a>
      } }
    </nav>

    <div class="p-4 border-t border-zinc-200">
      <div class="flex items-center gap-3 p-2">
        <div
          class="w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold shrink-0"
        >
          {{ authService.currentUser()?.fullName?.charAt(0) }}
        </div>
        <div [class.hidden]="isCollapsed()" class="flex-1 min-w-0">
          <p class="text-sm font-semibold truncate">{{ authService.currentUser()?.username }}</p>
        </div>
        <button
          (click)="authService.logout()"
          [class.hidden]="isCollapsed()"
          class="text-zinc-400 hover:text-red-500 transition-colors p-1"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="w-6 h-6"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l3 3m0 0-3 3m3-3H22.5"
            />
          </svg>
        </button>
      </div>
    </div>
  </aside>

  <div class="flex-1 flex flex-col min-w-0 overflow-hidden">
    <header
      class="h-16 flex items-center justify-between px-8 bg-white/80 backdrop-blur-md sticky top-0 z-10 border-b border-zinc-100"
    >
      <div class="flex items-center gap-2 text-sm">
        <app-breadcrumb></app-breadcrumb>
      </div>
      <div class="flex items-center gap-4">
        <button
          (click)="profile()"
          class="w-9 h-9 flex items-center justify-center rounded-full hover:bg-zinc-100 text-zinc-600 transition-colors"
        >
          <img src="assets/icons/profile.svg" alt="Logo" class="w-5 h-5" />
        </button>
        <button
          (click)="authService.logout()"
          class="w-9 h-9 flex items-center justify-center rounded-full hover:bg-zinc-100 text-zinc-600 transition-colors"
        >
          <img src="assets/icons/log-out.svg" alt="Logo" class="w-5 h-5" />
        </button>
      </div>
    </header>

    <main class="flex-1 overflow-y-auto p-4 bg-white">
      <div class="max-w-6xl mx-auto">
        <router-outlet></router-outlet>
      </div>
    </main>
  </div>
</div>
