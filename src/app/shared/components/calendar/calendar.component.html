<div
  class="p-6 bg-bg-secondary rounded-[2.5rem] border border-border shadow-sm overflow-hidden transition-colors duration-300">

  <div class="flex items-center justify-between mb-8">
    <div class="flex flex-col">
      <h2 class="text-2xl font-black text-text-primary capitalize tracking-tighter leading-none">
        {{ calendarTitle() }}
      </h2>
      <p class="text-text-muted text-[10px] font-black uppercase tracking-widest mt-2">Agenda Semanal Corporativa</p>
    </div>

    <div class="flex items-center gap-2 bg-bg-primary p-1.5 rounded-2xl border border-border transition-colors">
      <button (click)="prev()"
        class="p-2 hover:bg-bg-secondary hover:shadow-sm rounded-xl transition-all text-text-secondary hover:text-text-primary">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-width="2.5" d="M15 19l-7-7 7-7" />
        </svg>
      </button>

      <button (click)="setToday()"
        class="px-4 py-2 text-[10px] font-black uppercase tracking-widest text-text-muted hover:text-text-primary transition-colors">
        Hoy
      </button>

      <button (click)="next()"
        class="p-2 hover:bg-bg-secondary hover:shadow-sm rounded-xl transition-all text-text-secondary hover:text-text-primary">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-width="2.5" d="M9 5l7 7-7 7" />
        </svg>
      </button>
    </div>
  </div>

  <div class="relative rounded-3xl overflow-hidden border border-border bg-bg-primary transition-colors duration-300">
    <mwl-calendar-week-view [viewDate]="viewDate()" [events]="events()" [hourSegmentHeight]="60" [dayStartHour]="8"
      [dayEndHour]="20" [weekStartsOn]="1" [headerTemplate]="zincHeaderTemplate" locale="es">
    </mwl-calendar-week-view>
  </div>
</div>

<ng-template #zincHeaderTemplate let-days="days" let-locale="locale">
  <div class="flex border-b border-border bg-bg-secondary/50">
    @for (day of days; track day.date) {
    <div class="flex-1 py-4 text-center border-r border-border last:border-r-0 transition-colors duration-300"
      [class.bg-bg-primary]="day.isToday">
      <p class="text-[10px] font-black uppercase tracking-widest mb-1" [class.text-primary]="day.isToday"
        [class.text-text-muted]="!day.isToday">
        {{ day.date | date:'EEE':undefined:'es' }}
      </p>
      <p class="text-xl font-black tabular-nums" [class.text-text-primary]="day.isToday"
        [class.text-text-secondary]="!day.isToday">
        {{ day.date | date:'d' }}
      </p>

      @if (day.isToday) {
      <div class="w-1.5 h-1.5 bg-primary rounded-full mx-auto mt-1.5 shadow-sm shadow-primary/40"></div>
      }
    </div>
    }
  </div>
</ng-template>